<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>乡村故事</title>
        <link rel="icon" type="image/png" sizes="32x32" href="img/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="img/favicon-16x16.png">
        <link rel="stylesheet" type="text/css" href="css/story.css" />
	</head>
	<style type="text/css">
			body,html{
				margin:0;
				overflow: hidden;
				transition:top 1s ease;
			}
			h2{
				color: #efefef;
				text-align: center;
				line-height: 0;
			}
            #mune{
            	background-color: #eceeb6;
            	height: 80px;
            	padding-left:80px ;
            	box-shadow: 0 8px 8px rgb(0,0,0,0.2);
            	position: relative;
            	z-index: 10;
            }
	</style>
	<body>
        
		<div id="mune">
			<img src="img/story-LOGO.png">
		</div>
		<div class="form" id="form1">
			<div id="rong_qi">
				<div class="component" id="component1">
					<img src="img/weiyuan.png" />
					<h2>魏源</h2>
					<p>坐落于湖南省邵阳市隆回县司门前镇学堂弯村的魏源故居</p>
				</div>
				<div class="component" id="component2">
					<img src="img/caie.png" />
					<h2>蔡锷</h2>
					<p>蔡锷故居，坐落于湖南省邵阳市大祥区蔡锷乡蔡锷村</p>
				</div>
				<div class="component" id="component3">
					<img src="img/jiangsu.png" />
					<h2>“非遗村”</h2>
					<p>江苏省张家港市凤凰镇双塘村</p>
				</div>
				<div id="component4">
					<img src="img/miaojia.png" />
					<h2>苗家热情</h2>
					<p>湖南省湘西土家族苗族自治州凤凰县麻冲乡下辖村</p>
				</div>
			</div>
			
		</div>
	    
		<div class="form" id="form2">
			<div id="rong_qi2">
				<div id="racimg1">
				</div>
				<div id="racimg2">
				</div>
				<div id="textBox1">
					<h1>剪&nbsp;纸</h1>
					<h2>——来自中国民间的艺术</h2>
					<div id="maintext">
					<p>扬州剪纸，江苏省扬州市民间传统美术，国家级非物质文化遗产之一。</p>
					<p>扬州剪纸是江苏省扬州市文化艺术的一项重要组成内容，
						扬州是中国剪纸流行最早的地区之一，唐宋时期就有剪纸报春的习俗。
						扬州剪纸线条清秀流畅，构图精巧雅致
						，形象夸张简洁，技法变中求新，形成了特有的剪味纸感和艺术魅力，
						为中国南方民间剪纸艺术的代表之一。</p>
					<p>后庄头村位于高邑县东南部，南临邢台柏乡县</p>
					<p>庄头剪纸又称庄头原生态剪纸，是一种传统民间剪纸艺术。
						和其它地方的剪纸不同的是它的原生态性，
						就是说它直接拿剪刀对物景或凭想象剪铰各种图案，不用任何刀具刻制，所剪作品花样繁多，刀法细腻，造型夸张，体裁广泛，古朴大方，意趣横生，对称连贯，妙剪生花。庄头剪纸以红裱为主要材料。
						剪制的对象以花卉、果蔬、动物为主，还兼有人物和书法。
						是高邑县第一批非物质文化遗产名录项目。</p>
					</div>
				</div>
			</div>
			
		</div>
		<div class="form" id="form3">
			<div id="textBox2">
				<div id="shangeimg">
					<img src="img/shnge.png" />
				</div>
				<div id="shangetext">
					<h1>山&nbsp;歌</h1>
					<p>——关于刘三姐的传说</p>
					<p>
						据广西罗城县志记载：
						刘三姐原来618年出生在天河县（今罗城仫佬族自治县四把镇）下里的蓝靛村
						（今罗城仫佬族自治县四把镇下里社区蓝靛村），
						那里还有她故居的遗址，那村刘姓的族谱中还有记载。
					</p>
					<p>
						广西汉族山歌内容丰富，
						有生产劳动过程中的“节气歌”、“插秧歌”、“收禾歌”、 “打场歌”、“渔歌”；
						红白喜事中的“哭丧歌”、“哭嫁歌”、“酒歌”；
						各种社交活动 和娱乐活动中的“情歌”、“猜谜歌”等。
						山歌的形式又因地区的不同而各具特点，故又有 “柳州山歌”、“桂林山歌”、
						“桂北山歌”、“桂东南山歌”、“水上民歌”等称。流行 于桂林、柳州、桂北、
						桂西北及桂中一些地区的山歌，
						大都用西南官话演唱，由于广西称西 南官话为“桂柳话”，
						故又称“桂柳山歌”。						
					</p>
				</div>
			</div>
		</div>
		<script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
		<script type="text/javascript">
		    var formIndex = -1;
		    var forms = $('.form');
		    var istop = false;
		    var isplay1 = false;
		    var isplay2 = false;
		    var isplay3 = false;
		    $(document).ready(function() {
		        $(document).on("wheel", mousewheel);
		    });
		
		    function mousewheel(e) {
		        if (e.originalEvent.wheelDelta) {
		            // IE/Opera/Chrome
		            if (e.originalEvent.wheelDelta < 0) {
		                // 下
		                formIndex++;
		            } else {
		                // 上
		                formIndex--;
		            }
		        }
		        setAnimate();
		    }
		
		    function setAnimate() {
		        if (istop && formIndex != -1) {
		            formIndex = 0;
		            istop = false;
		        } else if (formIndex > 2) {
		            formIndex = 2;
		        } else if (formIndex < 0) {
		            $('html, body').animate({
		                scrollTop: 0
		            }, 'slow');
		            formIndex = 0;
		            istop = true;
		        }
		        if (!istop) {
		            $('html, body').animate({
		                scrollTop: $(forms[formIndex]).offset().top
		            }, 'slow');
		        }
		        playAnimate(formIndex);
		    }
		
		    function playAnimate(index) {
		        if (index == 0 && (!istop)) {
		            playAnimation1();
		            if (isplay2){
		            	closeAnimation2();
		            }
		            if (isplay3){
		            	closeAnimation3();
		            }
		        } else if (index == 1) {
		            playAnimation2();
		            if (isplay1){
		            	closeAnimation1();
		            }
		            if (isplay3){
		            	closeAnimation3();
		            }
		        } else if (index == 2) {
		            playAnimation3();
		            if (isplay2){
		            	closeAnimation2();
		            }
		            if (isplay1){
		            	closeAnimation1();
		            }
		        } else if (istop){
		        	closeAnimation1();
		        }
		    }
		    function playAnimation2(){
		    	var img1 =$('#racimg1');
		    	var img2 =$('#racimg2');
		    	img1.animate({top:'-220px',width:'400px',height:'400px'},800);
		    	img1.css("animation", "rotate1 1s linear");
		    	setTimeout(function(){
		    		img1.css('transform','rotate(-40deg)')
	    		},1000);
		    	img2.animate({bottom:'-540px',width:'480px',height:'480px'},800);
		    	img2.css("animation", "rotate2 1s linear");
		    	setTimeout(function(){
		    		img2.css('transform','rotate(40deg)')
	    		},1000);
    			$('#textBox1').css('opacity','1.0');
	    		isplay2 = true;
		    }
		    function playAnimation3(){
		    	$('#shangetext').css('clip-path','inset(0)');
		    	$('#shangeimg').css('opacity',1);
		    	isplay3=true
		    }
        	function playAnimation1() {
			    $("#component1").animate({left: '600px'}, 800);
			    for (let i=2;i<=4;i++){
			    	setTimeout(function() {
				        $("#component"+i).animate({left:  800-i*200+'px'}, 500);
				    }, (i-1)*200); 
			    }
			    isplay1=true;
			}
        	function closeAnimation1(){
			    for (let i=1;i<=6;i++){
			    	setTimeout(function() {
				        $("#component"+i).animate({left: 0+'px'}, 500);
				    }, (i-1)*200); 
			    }
			    isplay1=false;
        	}
        	function closeAnimation2(){
		    	var img1 =$('#racimg1');
		    	var img2 =$('#racimg2');
		    	img1.animate({top:'-200px',width:'320px',height:'320px'},800);
		    	img1.css("animation", "");
		    	setTimeout(function(){
		    		img1.css('transform','rotate(50deg)')
	    		},1000);
		    	img2.animate({bottom:'-660px',width:'430px',height:'430px'},800);
		    	img2.css("animation", "");
		    	setTimeout(function(){
		    		img2.css('transform','rotate(-80deg)')
	    		},1000);
    			$('#textBox1').css('opacity','0.1');
	    		isplay2 = false;
        	}
        	function closeAnimation3(){
//		    	$('#shangetext').css('clip-path','inset(0)');
		    	$('#shangetext').css('clip-path','inset(0 50% 0 50%)');
		    	$('#shangeimg').css('opacity',0.1);
		    	isplay3=false;
        	}
        </script>
		
	</body>
</html>
